<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meetings Dashboard</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Google Font 'Inter' -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Ensures the app fills the entire viewport */
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevents external scrollbars */
        }
        /* Apply the Inter font family */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7; /* Slightly darker background for the full viewport */
        }
        /* Custom scrollbar for horizontal nav */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none; /* IE and Edge */
            scrollbar-width: none; /* Firefox */
        }
        
        /* Custom background for the individual chat view */
        #individual-chat-section {
            /* Full screen mode makes the background image less practical, but keeping it for consistency */
            background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQiJKMy4z1AgRUt9Z_0ZLYzDGvk5-6RqIzV2cE4NCJO06hAE_qOI2lK_ui5&s=10');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
        }
        
        /* Hide the emoji bar initially and ensure absolute positioning is respected */
        #emoji-bar {
            opacity: 0;
            pointer-events: none;
            display: flex; /* Always display:flex, visibility controlled by opacity and pointer-events */
        }
        .emoji-show {
            opacity: 1 !important;
            pointer-events: auto !important;
        }
        
        /* Style for the reaction attached to the message */
        .reaction-emoji {
            position: absolute;
            bottom: -8px;
            right: -8px;
            background-color: white;
            border-radius: 9999px;
            padding: 2px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            font-size: 0.75rem; /* text-xs */
            line-height: 1;
        }
        
        /* Custom style for the textarea to allow smooth height transition */
        #message-input {
            transition: height 0.2s ease-out;
            max-height: 120px; /* Limit max height to prevent overflow */
            line-height: 1.5;
        }
        
        /* Ensures main app content area respects the footer height and allows scrolling */
        .main-app-content {
            height: calc(100vh - 6rem); /* 100vh minus footer height (h-24 ~ 6rem) */
            overflow-y: auto;
        }
    </style>
</head>
<body>

    <!-- Main container is now w-full h-full, spanning the whole viewport. -->
    <div class="w-full h-full bg-white relative overflow-hidden">
        
        <!-- Wrapper for all scrollable content (Meetings, Chats, User Profile) -->
        <div id="main-content-wrapper" class="main-app-content">

            <!-- Top Navigation Tabs (Hidden when in chat) -->
            <nav id="top-nav" class="p-4 pt-6 mb-2">
                <div class="flex space-x-3 overflow-x-auto no-scrollbar py-2">
                    <button class="px-5 py-2.5 rounded-full text-sm font-medium bg-gray-100 text-gray-700 whitespace-nowrap">General</button>
                    <button class="px-5 py-2.5 rounded-full text-sm font-medium bg-gray-100 text-gray-700 whitespace-nowrap">Design</button>
                    <button class="px-5 py-2.5 rounded-full text-sm font-medium bg-orange-500 text-white shadow-md whitespace-nowrap">Meetings</button>
                    <button class="px-5 py-2.5 rounded-full text-sm font-medium bg-gray-100 text-gray-700 whitespace-nowrap">Develop</button>
                    <button class="px-5 py-2.5 rounded-full text-sm font-medium bg-gray-100 text-gray-700 whitespace-nowrap">Marketing</button>
                </div>
            </nav>

            <!-- Main Content Area -->
            <div>

                <!-- Section 1: Meetings -->
                <main id="meetings-section" class="p-4">
                    <!-- Content from previous step -->
                    <section class="mb-8">
                        <div class="flex justify-between items-center text-center max-w-md mx-auto">
                            <div class="flex flex-col items-center space-y-2 text-gray-500">
                                <span class="text-xs font-medium">Sun</span>
                                <span class="font-semibold text-lg">5</span>
                            </div>
                            <div class="flex flex-col items-center space-y-2 text-gray-500">
                                <span class="text-xs font-medium">Mon</span>
                                <span class="font-semibold text-lg">6</span>
                            </div>
                            <div class="flex flex-col items-center space-y-2 text-gray-500">
                                <span class="text-xs font-medium">Tue</span>
                                <span class="font-semibold text-lg">7</span>
                            </div>
                            <!-- Active Day -->
                            <div class="flex flex-col items-center space-y-2 text-white bg-indigo-600 rounded-2xl px-4 py-3 shadow-lg">
                                <span class="text-xs font-medium">Wed</span>
                                <span class="font-semibold text-lg">8</span>
                            </div>
                            <div class="flex flex-col items-center space-y-2 text-gray-500">
                                <span class="text-xs font-medium">Thu</span>
                                <span class="font-semibold text-lg">9</span>
                            </div>
                            <div class="flex flex-col items-center space-y-2 text-gray-500">
                                <span class="text-xs font-medium">Fri</span>
                                <span class="font-semibold text-lg">10</span>
                            </div>
                            <div class="flex flex-col items-center space-y-2 text-gray-500">
                                <span class="text-xs font-medium">Sat</span>
                                <span class="font-semibold text-lg">11</span>
                            </div>
                        </div>
                    </section>

                    <!-- Schedule/Timeline -->
                    <section class="max-w-md mx-auto">
                        <div class="relative">
                            <!-- Timeline Vertical Line -->
                            <div class="absolute left-0 top-0 bottom-0 w-0.5 bg-gray-100" style="left: 3.25rem;"></div>

                            <!-- Timeline Items -->
                            <div class="space-y-6">
                                <!-- Item 1: Weekly Meetup -->
                                <div class="flex space-x-4">
                                    <div class="w-10 text-right text-sm text-gray-400 font-medium pt-1">01</div>
                                    <div class="flex-1 bg-white border border-gray-100 rounded-2xl shadow-sm p-4 border-l-4 border-orange-500">
                                        <div class="flex justify-between items-start mb-3">
                                            <div>
                                                <h3 class="font-semibold text-gray-900">Weekly Meetup</h3>
                                                <span class="text-xs font-medium bg-green-100 text-green-700 px-2 py-0.5 rounded-full">On Going</span>
                                            </div>
                                            <button class="bg-orange-500 text-white text-sm font-medium px-5 py-2 rounded-full shadow-md">Join</button>
                                        </div>
                                        <div class="flex justify-between items-center text-sm text-gray-500">
                                            <div class="flex items-center space-x-2">
                                                <!-- Google Meet Icon -->
                                                <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.012 11.001c.217.039.43.076.64.112l-1.39-1.39c-.112.21-.21.425-.303.64l1.053 1.053zM10 12c.553 0 1-.447 1-1s-.447-1-1-1-1 .447-1 1 .447 1 1 1z"></path><path fill-rule="evenodd" d="M8 2a1 1 0 00-1 1v2.215c-1.68.384-3 1.83-3 3.553v1.464c0 1.724 1.32 3.17 3 3.553V17a1 1 0 102 0v-2.215c1.68-.384 3-1.83 3-3.553V8.768c0-1.724-1.32-3.17-3-3.553V3a1 1 0 00-1-1H8zm0 4.768a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5z" clip-rule="evenodd"></path><path d="M13.25 10c0 .5-.1.975-.28 1.418l1.39 1.39a6.25 6.25 0 000-5.617l-1.39 1.39c.18.443.28.918.28 1.419z"></path></svg>
                                                <span>Google Meet</span>
                                            </div>
                                            <div class="flex items-center space-x-2">
                                                <span class="text-sm text-gray-500">Members</span>
                                                <div class="flex -space-x-2">
                                                    <img class="w-6 h-6 rounded-full border-2 border-white" src="https://placehold.co/32x32/FFC107/FFFFFF?text=A" onerror="this.onerror=null;this.src='https://placehold.co/32x32/FFC107/FFFFFF?text=A';" alt="member 1">
                                                    <img class="w-6 h-6 rounded-full border-2 border-white" src="https://placehold.co/32x32/4CAF50/FFFFFF?text=B" onerror="this.onerror=null;this.src='https://placehold.co/32x32/4CAF50/FFFFFF?text=B';" alt="member 2">
                                                    <img class="w-6 h-6 rounded-full border-2 border-white" src="https://placehold.co/32x32/03A9F4/FFFFFF?text=C" onerror="this.onerror=null;this.src='https://placehold.co/32x32/03A9F4/FFFFFF?text=C';" alt="member 3">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Item 2: Break -->
                                <div class="flex space-x-4">
                                    <div class="w-10 text-right text-sm text-gray-400 font-medium pt-1">02</div>
                                    <div class="flex-1 bg-white border border-gray-100 rounded-2xl shadow-sm p-4 border-l-4 border-gray-300">
                                        <h3 class="font-semibold text-gray-900">Break</h3>
                                        <p class="text-sm text-gray-500">02:30 PM - 03:30 PM</p>
                                    </div>
                                </div>
                                
                                <!-- Item 3: Design Review -->
                                <div class="flex space-x-4">
                                    <div class="w-10 text-right text-sm text-gray-400 font-medium pt-1">01</div>
                                    <div class="flex-1 bg-white border border-gray-100 rounded-2xl shadow-sm p-4 border-l-4 border-indigo-600">
                                        <div class="flex justify-between items-start mb-3">
                                            <div>
                                                <h3 class="font-semibold text-gray-900">Design Review</h3>
                                                <p class="text-sm text-gray-500">10:30 AM - 11:30 AM</p>
                                            </div>
                                            <button class="text-gray-400 hover:text-indigo-600">
                                                <!-- Bell Icon -->
                                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg>
                                            </button>
                                        </div>
                                        <div class="flex justify-between items-center text-sm text-gray-500">
                                            <div class="flex items-center space-x-2">
                                                <!-- Google Meet Icon -->
                                                <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.012 11.001c.217.039.43.076.64.112l-1.39-1.39c-.112.21-.21.425-.303.64l1.053 1.053zM10 12c.553 0 1-.447 1-1s-.447-1-1-1-1 .447-1 1 .447 1 1 1z"></path><path fill-rule="evenodd" d="M8 2a1 1 0 00-1 1v2.215c-1.68.384-3 1.83-3 3.553v1.464c0 1.724 1.32 3.17 3 3.553V17a1 1 0 102 0v-2.215c1.68-.384 3-1.83 3-3.553V8.768c0-1.724-1.32-3.17-3-3.553V3a1 1 0 00-1-1H8zm0 4.768a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5z" clip-rule="evenodd"></path><path d="M13.25 10c0 .5-.1.975-.28 1.418l1.39 1.39a6.25 6.25 0 000-5.617l-1.39 1.39c.18.443.28.918.28 1.419z"></path></svg>
                                                <span>Google Meet</span>
                                            </div>
                                            <div class="flex items-center space-x-2">
                                                <span class="text-sm text-gray-500">Members</span>
                                                <div class="flex -space-x-2">
                                                    <img class="w-6 h-6 rounded-full border-2 border-white" src="https://placehold.co/32x32/F44336/FFFFFF?text=D" onerror="this.onerror=null;this.src='https://placehold.co/32x32/F44336/FFFFFF?text=D';" alt="member 1">
                                                    <img class="w-6 h-6 rounded-full border-2 border-white" src="https://placehold.co/32x32/9C27B0/FFFFFF?text=E" onerror="this.onerror=null;this.src='https://placehold.co/32x32/9C27B0/FFFFFF?text=E';" alt="member 2">
                                                    <img class="w-6 h-6 rounded-full border-2 border-white" src="https://placehold.co/32x32/FFEB3B/333333?text=F" onerror="this.onerror=null;this.src='https://placehold.co/32x32/FFEB3B/333333?text=F';" alt="member 3">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Item 4: Q2 Round Up -->
                                <div class="flex space-x-4">
                                    <div class="w-10 text-right text-sm text-gray-400 font-medium pt-1">02</div>
                                    <div class="flex-1 bg-white border border-gray-100 rounded-2xl shadow-sm p-4 border-l-4 border-indigo-600">
                                        <div class="flex justify-between items-start mb-3">
                                            <div>
                                                <h3 class="font-semibold text-gray-900">Q2 Round Up</h3>
                                                <p class="text-sm text-gray-500">12:30 PM - 02:30 PM</p>
                                            </div>
                                            <button class="text-gray-400 hover:text-indigo-600">
                                                <!-- Bell Icon -->
                                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg>
                                            </button>
                                        </div>
                                        <div class="flex justify-between items-center text-sm text-gray-500">
                                            <div class="flex items-center space-x-2">
                                                <!-- Google Meet Icon -->
                                                <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.012 11.001c.217.039.43.076.64.112l-1.39-1.39c-.112.21-.21.425-.303.64l1.053 1.053zM10 12c.553 0 1-.447 1-1s-.447-1-1-1-1 .447-1 1 .447 1 1 1z"></path><path fill-rule="evenodd" d="M8 2a1 1 0 00-1 1v2.215c-1.68.384-3 1.83-3 3.553v1.464c0 1.724 1.32 3.17 3 3.553V17a1 1 0 102 0v-2.215c1.68-.384 3-1.83 3-3.553V8.768c0-1.724-1.32-3.17-3-3.553V3a1 1 0 00-1-1H8zm0 4.768a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5z" clip-rule="evenodd"></path><path d="M13.25 10c0 .5-.1.975-.28 1.418l1.39 1.39a6.25 6.25 0 000-5.617l-1.39 1.39c.18.443.28.918.28 1.419z"></path></svg>
                                                <span>Google Meet</span>
                                            </div>
                                            <div class="flex items-center space-x-2">
                                                <span class="text-sm text-gray-500">Members</span>
                                                <div class="flex -space-x-2">
                                                    <img class="w-6 h-6 rounded-full border-2 border-white" src="https://placehold.co/32x32/FF9800/FFFFFF?text=G" onerror="this.onerror=null;this.src='https://placehold.co/32x32/FF9800/FFFFFF?text=G';" alt="member 1">
                                                    <img class="w-6 h-6 rounded-full border-2 border-white" src="https://placehold.co/32x32/795548/FFFFFF?text=H" onerror="this.onerror=null;this.src='https://placehold.co/32x32/795548/FFFFFF?text=H';" alt="member 2">
                                                    <img class="w-6 h-6 rounded-full border-2 border-white" src="https://placehold.co/32x32/607D8B/FFFFFF?text=I" onerror="this.onerror=null;this.src='https://placehold.co/32x32/607D8B/FFFFFF?text=I';" alt="member 3">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </main>

                <!-- Section 2: Chat List -->
                <section id="chat-list-section" class="hidden p-4">
                    <h1 class="text-3xl font-bold mb-6 text-gray-900 max-w-md mx-auto">Chats</h1>
                    <div class="space-y-4 max-w-md mx-auto">
                        <!-- Chat Item 1 (One Goal) - NOW WITH IDs FOR DYNAMIC UPDATING -->
                        <div class="chat-item flex items-center space-x-4 p-3 rounded-2xl hover:bg-gray-100 cursor-pointer" data-chat-name="One Goal">
                            <img class="w-12 h-12 rounded-full" src="https://placehold.co/64x64/FFC107/FFFFFF?text=A" onerror="this.onerror=null;this.src='https://placehold.co/64x64/FFC107/FFFFFF?text=A';" alt="Avatar">
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-900">One Goal</h3>
                                <!-- TARGET ELEMENT FOR LAST MESSAGE PREVIEW -->
                                <p class="text-sm text-gray-500 truncate" id="one-goal-last-message">Hey, are we still on for the design review?</p>
                            </div>
                            <div class="text-right">
                                <span class="text-xs text-gray-400" id="one-goal-last-message-time">10:30 AM</span>
                                <span class="block text-xs bg-orange-500 text-white rounded-full w-5 h-5 flex items-center justify-center font-semibold ml-auto mt-1">2</span>
                            </div>
                        </div>
                        <!-- Chat Item 2 (Design Team) -->
                        <div class="chat-item flex items-center space-x-4 p-3 rounded-2xl hover:bg-gray-100 cursor-pointer" data-chat-name="Design Team">
                            <img class="w-12 h-12 rounded-full" src="https://placehold.co/64x64/4CAF50/FFFFFF?text=B" onerror="this.onerror=null;this.src='https://placehold.co/64x64/4CAF50/FFFFFF?text=B';" alt="Avatar">
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-900">Design Team</h3>
                                <p class="text-sm text-gray-500 truncate">Sarah: Just pushed the latest mockups.</p>
                            </div>
                            <div class="text-right">
                                <span class="text-xs text-gray-400">Yesterday</span>
                            </div>
                        </div>
                        <!-- Chat Item 3 (Chris Lee) -->
                        <div class="chat-item flex items-center space-x-4 p-3 rounded-2xl hover:bg-gray-100 cursor-pointer" data-chat-name="Chris Lee">
                            <img class="w-12 h-12 rounded-full" src="https://placehold.co/64x64/03A9F4/FFFFFF?text=C" onerror="this.onerror=null;this.src='https://placehold.co/64x64/03A9F4/FFFFFF?text=C';" alt="Avatar">
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-900">Chris Lee</h3>
                                <p class="text-sm text-gray-500 truncate">Got it, thanks!</p>
                            </div>
                            <div class="text-right">
                                <span class="text-xs text-gray-400">Mon</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 3: User Profile -->
                <section id="user-section" class="hidden p-4">
                    <h1 class="text-3xl font-bold mb-6 text-gray-900 max-w-md mx-auto">Profile</h1>
                    <!-- Profile Card -->
                    <div class="flex flex-col items-center bg-white p-6 rounded-2xl border border-gray-100 shadow-sm mb-6 max-w-md mx-auto">
                        <img class="w-24 h-24 rounded-full shadow-lg" src="https://placehold.co/128x128/673AB7/FFFFFF?text=U" onerror="this.onerror=null;this.src='https://placehold.co/128x128/673AB7/FFFFFF?text=U';" alt="User Profile">
                        <h2 class="text-2xl font-semibold mt-4 text-gray-900">Udara</h2>
                        <p class="text-gray-500">Project Manager</p>
                        <button class="mt-4 bg-indigo-600 text-white text-sm font-medium px-5 py-2 rounded-full shadow-md">Edit Profile</button>
                    </div>
                    <!-- Settings List -->
                    <div class="space-y-2 max-w-md mx-auto">
                        <a href="#" class="flex justify-between items-center p-4 bg-white rounded-2xl border border-gray-100 shadow-sm hover:bg-gray-50">
                            <span class="font-medium text-gray-700">Account Settings</span>
                            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </a>
                        <a href="#" class="flex justify-between items-center p-4 bg-white rounded-2xl border border-gray-100 shadow-sm hover:bg-gray-50">
                            <span class="font-medium text-gray-700">Notifications</span>
                            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </a>
                        <a href="#" class="flex justify-between items-center p-4 bg-white rounded-2xl border border-gray-100 shadow-sm hover:bg-gray-50">
                            <span class="font-medium text-gray-700">App Appearance</span>
                            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </a>
                        <a href="#" class="flex justify-between items-center p-4 bg-white rounded-2xl border border-gray-100 shadow-sm hover:bg-gray-50 text-red-600">
                            <span class="font-medium">Log Out</span>
                        </a>
                    </div>
                </section>
                
            </div> <!-- End of content sections wrapper -->

        </div> <!-- End of main-content-wrapper (Scrollable Area) -->

        <!-- Section 4: Individual Chat (Absolute positioning ensures it overlays the entire screen when active) -->
        <section id="individual-chat-section" class="hidden absolute top-0 left-0 right-0 bottom-0 w-full h-full flex flex-col z-10">
            <!-- Chat Header -->
            <header class="flex items-center p-4 border-b border-gray-200 flex-shrink-0 bg-white/90 backdrop-blur-sm">
                <button id="back-to-chat-list-btn" class="text-gray-600 hover:text-gray-900">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                </button>
                <img id="chat-header-avatar" class="w-10 h-10 rounded-full mx-3" src="" onerror="this.onerror=null;this.src='https://placehold.co/64x64/673AB7/FFFFFF?text=C';" alt="Avatar">
                <h2 id="chat-header-name" class="text-lg font-semibold text-gray-900"></h2>
            </header>
            
            <!-- EMOJI REACTION BAR -->
            <div id="emoji-bar" class="absolute z-20 bg-white shadow-xl rounded-full p-1 border border-gray-100 transition-opacity duration-150" style="top: 0; left: 0;">
                <button data-emoji="üëç" class="p-2 hover:bg-gray-100 rounded-full text-xl leading-none transition-transform hover:scale-110">üëç</button>
                <button data-emoji="‚ù§Ô∏è" class="p-2 hover:bg-gray-100 rounded-full text-xl leading-none transition-transform hover:scale-110">‚ù§Ô∏è</button>
                <button data-emoji="üèÜ" class="p-2 hover:bg-gray-100 rounded-full text-xl leading-none transition-transform hover:scale-110">üèÜ</button>
                <button data-emoji="ü§î" class="p-2 hover:bg-gray-100 rounded-full text-xl leading-none transition-transform hover:scale-110">ü§î</button>
                <button data-emoji="üôè" class="p-2 hover:bg-gray-100 rounded-full text-xl leading-none transition-transform hover:scale-110">üôè</button>
            </div>

            <!-- Message Area (Scrollable) -->
            <div id="message-area" class="flex-1 p-4 space-y-4 overflow-y-auto max-w-lg mx-auto w-full">
                <!-- Messages will be dynamically added here -->
            </div>
            
            <!-- Centered Channel Broadcast Message -->
            <div id="messaging-not-allowed" class="hidden absolute inset-0 flex items-center justify-center p-8 z-10 pointer-events-none">
                <div class="bg-gray-800/80 backdrop-blur-sm text-white p-4 rounded-xl text-center shadow-2xl max-w-xs transition-opacity duration-300">
                    <!-- Broadcast Icon (e.g., Arrows up and down) -->
                    <svg class="w-6 h-6 mx-auto mb-2 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.55 4.55l-4.55 4.55M12 4v16m-3-6l-4.55 4.55L9 19.55"></path></svg>
                    <p class="font-medium">This is a broadcast channel.</p>
                    <p class="text-sm text-gray-300">Replies are not allowed.</p>
                </div>
            </div>

            <!-- Chat Footer (NEW WHATSAPP/TELEGRAM STYLE INPUT) -->
            <footer id="chat-footer" class="p-3 border-t border-gray-200 flex-shrink-0 bg-white/90 backdrop-blur-sm">
                 <div id="message-input-bar" class="hidden flex items-end space-x-2 max-w-lg mx-auto">
                    
                    <!-- Attachment Button (left-most) -->
                    <button id="attachment-btn" class="text-gray-500 hover:text-gray-700 p-3 rounded-full mb-1">
                        <!-- Plus/Attachment Icon -->
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                    </button>
                    
                    <!-- Input Wrapper (Textarea + Emoji Icon) -->
                    <div class="flex-1 relative">
                        <!-- Note: Changed from <input> to <textarea> and added resize-none -->
                        <textarea id="message-input" placeholder="Message" rows="1" class="w-full resize-none border border-gray-300 bg-white rounded-3xl py-2 pl-4 pr-12 text-base focus:outline-none focus:ring-2 focus:ring-indigo-500 overflow-hidden" style="min-height: 48px;"></textarea>
                        
                        <!-- Emoji Button (Positioned absolute inside textarea area) -->
                        <button id="emoji-input-btn" class="absolute right-0 bottom-0 text-gray-500 hover:text-gray-700 p-2.5 mb-0.5 mr-1.5 rounded-full">
                            <!-- Smile/Emoji Icon -->
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        </button>
                    </div>

                    <!-- Send/Mic FAB -->
                    <button id="send-mic-btn" class="bg-orange-500 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg flex-shrink-0 mb-0.5">
                        <!-- Send Icon (Visible by default in code, hidden/shown dynamically) -->
                        <svg id="send-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                        <!-- Mic Icon (Hidden by default in code, hidden/shown dynamically) -->
                        <svg id="mic-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7v0a7 7 0 01-7-7v0m14 0a7 7 0 00-7-7v0a7 7 0 00-7 7m14 0h1M5 11h-1"></path></svg>
                    </button>
                </div>
            </footer>
        </section>


        <!-- Bottom Floating Navigation (Footer) -->
        <footer id="bottom-nav-footer" class="fixed bottom-0 left-0 right-0 h-24 z-20">
            <!-- Inner wrapper to keep navigation constrained and centered on large screens -->
            <div class="max-w-md mx-auto h-full relative">
                <div class="absolute bottom-5 left-5 right-5 flex justify-between items-center">
                    
                    <!-- Left Icon Group -->
                    <div class="flex items-center bg-gray-800 shadow-xl rounded-full px-5 py-3 space-x-6">
                        <!-- Active Home Icon -->
                        <button id="home-btn" class="nav-btn bg-white text-gray-900 rounded-full p-2">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg>
                        </button>
                        <!-- Chat Icon -->
                        <button id="chat-btn" class="nav-btn text-gray-400 hover:text-white rounded-full p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                        </button>
                        <!-- Person Icon -->
                        <button id="user-btn" class="nav-btn text-gray-400 hover:text-white rounded-full p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                        </button>
                    </div>
                    
                    <!-- Right Floating Action Button (FAB) -->
                    <button class="bg-orange-500 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-xl transform transition-transform hover:scale-105">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                    </button>
                    
                </div>
            </div>
        </footer>

    </div>

    <!-- JavaScript for Navigation and Chat Logic -->
    <script>
        // --- Global Variables and References ---
        const homeBtn = document.getElementById('home-btn');
        const chatBtn = document.getElementById('chat-btn');
        const userBtn = document.getElementById('user-btn');
        const navBtns = [homeBtn, chatBtn, userBtn];

        const meetingsSection = document.getElementById('meetings-section');
        const chatListSection = document.getElementById('chat-list-section');
        const userSection = document.getElementById('user-section');
        const individualChatSection = document.getElementById('individual-chat-section');
        // Note: The main sections are no longer hidden/shown directly, but their parent wrapper handles scroll
        const contentSections = [meetingsSection, chatListSection, userSection, individualChatSection];

        const topNav = document.getElementById('top-nav');
        const bottomNavFooter = document.getElementById('bottom-nav-footer');

        const chatItems = document.querySelectorAll('.chat-item');
        const backToChatListBtn = document.getElementById('back-to-chat-list-btn');
        
        const messageInputBar = document.getElementById('message-input-bar');
        const messagingNotAllowed = document.getElementById('messaging-not-allowed'); 
        
        const chatHeaderName = document.getElementById('chat-header-name');
        const chatHeaderAvatar = document.getElementById('chat-header-avatar');
        const messageArea = document.getElementById('message-area');

        // References for sending messages and updating preview (UPDATED)
        const messageInput = document.getElementById('message-input'); // Now a textarea
        const sendMicBtn = document.getElementById('send-mic-btn'); // Combined button
        const sendIcon = document.getElementById('send-icon');
        const micIcon = document.getElementById('mic-icon');
        
        const oneGoalChatPreview = document.getElementById('one-goal-last-message');
        const oneGoalTimePreview = document.getElementById('one-goal-last-message-time');


        // Emoji Reaction Bar elements
        const emojiBar = document.getElementById('emoji-bar');
        let activeMessage = null; // To track which message is being reacted to

        // Helper to get the name of the currently open chat
        const currentChatName = () => chatHeaderName.textContent; 

        // --- CHAT STATE MANAGEMENT ---
        
        // Initial static history for the "One Goal" chat
        const initialOneGoalHistory = [
            { text: "Hey, are we still on for the design review?", isUser: false, reaction: '' },
            { text: "Absolutely! I'm prepping the final files now.", isUser: true, reaction: 'üëç' },
        ];
        
        // In-memory storage for chat histories
        const chatHistories = {
            'One Goal': initialOneGoalHistory,
            // Other chat histories could be added here
        };

        // --- Helper Function to Create Message HTML ---
        function createMessageHtml(text, isUser, reaction = '') {
            const justify = isUser ? 'justify-end' : 'justify-start';
            const bgColor = isUser ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-800';
            
            // The message-bubble class is crucial for detecting clicks
            return `
                <div class="flex ${justify}">
                    <div class="p-3 rounded-2xl max-w-xs message-bubble relative ${bgColor}" data-is-user="${isUser}">
                        <span class="message-content">${text}</span>
                        ${reaction ? `<span class="reaction-emoji">${reaction}</span>` : ''}
                    </div>
                </div>
            `;
        }

        // --- Render Chat History Function ---
        function renderChatHistory(chatName) {
            const history = chatHistories[chatName] || [];
            messageArea.innerHTML = ''; // Clear previous messages
            
            history.forEach(msg => {
                messageArea.innerHTML += createMessageHtml(msg.text, msg.isUser, msg.reaction);
            });

            messageArea.scrollTop = messageArea.scrollHeight; // Scroll to bottom
        }
        
        // --- Message Sending Logic ---
        function sendMessage() {
            const text = messageInput.value.trim();
            const chatName = currentChatName();
            if (text === '') return; // Don't send empty messages

            // 1. Add the new message (as user = true) to the in-memory state
            const newMessage = { text, isUser: true, reaction: '' };
            if (chatHistories[chatName]) {
                chatHistories[chatName].push(newMessage);
            }
            
            // 2. Re-render the chat area immediately
            messageArea.innerHTML += createMessageHtml(text, true);

            // 3. Update the chat list preview immediately for the 'One Goal' chat
            if (chatName === 'One Goal') {
                if (oneGoalChatPreview) {
                    oneGoalChatPreview.textContent = text;
                    oneGoalTimePreview.textContent = 'Now';
                }
            }

            // 4. Clear the input and reset height/icon
            messageInput.value = '';
            messageInput.style.height = '48px'; // Reset height
            toggleSendMicIcon(); // Switch back to Mic icon

            // 5. Scroll to the bottom
            messageArea.scrollTop = messageArea.scrollHeight;
            
            // Optional: Simulate a reply after a short delay for better UX demonstration
            if (chatName === 'One Goal') {
                 setTimeout(() => {
                    const replyText = "Got your message! Processing now...";
                    const replyMessage = { text: replyText, isUser: false, reaction: '' };

                    // Store the reply in state
                    chatHistories[chatName].push(replyMessage);

                    // Render the reply
                    messageArea.innerHTML += createMessageHtml(replyText, false);
                    messageArea.scrollTop = messageArea.scrollHeight;
                    
                    // Update the chat list preview again with the simulated reply
                    if (oneGoalChatPreview) {
                        oneGoalChatPreview.textContent = replyText;
                        oneGoalTimePreview.textContent = 'Just now';
                    }

                }, 1000); 
            }
        }


        // --- Input Box Features (NEW) ---

        // Function to automatically resize the textarea height
        function autoResizeTextarea() {
            messageInput.style.height = 'auto'; // Temporarily shrink to fit content
            const scrollHeight = messageInput.scrollHeight;
            
            // The min-height is 48px from CSS. We use scrollHeight to adjust, limited by max-height 120px in CSS
            if (scrollHeight < 120) { 
                messageInput.style.height = scrollHeight + 'px';
            } else {
                messageInput.style.height = '120px';
            }
        }
        
        // Function to toggle between Send and Mic icons based on input content
        function toggleSendMicIcon() {
            const hasText = messageInput.value.trim().length > 0;
            
            if (hasText) {
                sendIcon.classList.remove('hidden');
                micIcon.classList.add('hidden');
            } else {
                sendIcon.classList.add('hidden');
                micIcon.classList.remove('hidden');
            }
        }

        // Add event listeners for input resizing and icon toggling
        messageInput.addEventListener('input', () => {
            autoResizeTextarea();
            toggleSendMicIcon();
        });

        // Set initial icon state on load
        toggleSendMicIcon(); 


        // --- Main Navigation Logic (Unchanged) ---
        function handleNavClick(targetBtn, targetSectionId) {
            // Hide all main content sections
            meetingsSection.classList.add('hidden');
            chatListSection.classList.add('hidden');
            userSection.classList.add('hidden');
            // Ensure individual chat is hidden
            individualChatSection.classList.add('hidden');


            // Hide emoji bar on navigation change
            emojiBar.classList.remove('emoji-show');
            activeMessage = null;

            // Show the target content section
            document.getElementById(targetSectionId).classList.remove('hidden');

            // Show or hide the top navigation bar
            topNav.classList.toggle('hidden', targetSectionId !== 'meetings-section');
            
            // Show the bottom navigation bar for all main screens
            bottomNavFooter.classList.remove('hidden');

            // Update button styles
            navBtns.forEach(btn => {
                btn.classList.remove('bg-white', 'text-gray-900');
                btn.classList.add('text-gray-400');
            });

            // Set active style for the clicked button
            targetBtn.classList.add('bg-white', 'text-gray-900');
            targetBtn.classList.remove('text-gray-400');
        }

        // --- Chat Opening Logic (Updated to use renderChatHistory) ---
        function openChat(chatName, avatarSrc) {
            // Hide main screen content wrapper
            document.getElementById('main-content-wrapper').classList.add('hidden');

            // Navigation changes
            individualChatSection.classList.remove('hidden');
            topNav.classList.add('hidden'); 
            bottomNavFooter.classList.add('hidden'); // Hide bottom nav in chat view

            // Update header
            chatHeaderName.textContent = chatName;
            chatHeaderAvatar.src = avatarSrc;

            // Clear input and hide emoji bar
            messageInput.value = '';
            messageInput.style.height = '48px'; // Reset input height on opening
            emojiBar.classList.remove('emoji-show');
            activeMessage = null;
            
            // Conditional logic for message input, warning text, and messages
            if (chatName === 'One Goal') {
                // Messaging Allowed (One Goal)
                messageInputBar.classList.remove('hidden');
                messagingNotAllowed.classList.add('hidden'); // Hide centered warning
                
                // RENDER THE PERSISTED CHAT HISTORY
                renderChatHistory(chatName);
                toggleSendMicIcon(); // Ensure Mic icon is visible on empty input

                // Update the chat list preview to reflect the last message in the loaded history
                const lastMessage = chatHistories[chatName][chatHistories[chatName].length - 1];
                if (oneGoalChatPreview) {
                    oneGoalChatPreview.textContent = lastMessage.text;
                    oneGoalTimePreview.textContent = 'Just now'; // Or implement a proper time function
                }
                
            } else {
                // Messaging Not Allowed (Design Team, Chris Lee) - Broadcast Channel
                messageInputBar.classList.add('hidden');
                messagingNotAllowed.classList.remove('hidden'); // Show centered warning
                messageArea.innerHTML = ''; // Ensure message area is clear for broadcast channels
            }
        }

        // --- Message Click (Event Delegation) ---
        function positionEmojiBar(bubble) {
            // Find the index of the message that was reacted to
            const chatName = currentChatName();
            const bubbles = messageArea.querySelectorAll('.message-bubble');
            const messageIndex = Array.from(bubbles).indexOf(bubble);

            // 1. Get the bounding box of the message bubble relative to the viewport
            const bubbleRect = bubble.getBoundingClientRect();
            
            // 2. Get the bounding box of the message area (scrollable container)
            const messageAreaRect = messageArea.getBoundingClientRect();

            // 3. Calculate the absolute position for the emoji bar relative to the individual-chat-section
            
            // Use static dimensions for the emoji bar width for reliable positioning (approx. 200px wide)
            const emojiBarWidth = 200; 

            // Position relative to the top of the message area viewport, then convert to absolute position within the whole chat section
            let topPosition = (bubbleRect.top - messageAreaRect.top) + messageArea.scrollTop - 50; // 50px offset above the bubble

            // If positioning causes it to go off the top of the scrollable area, adjust to be below
            if (topPosition < messageArea.scrollTop + 10) {
                topPosition = (bubbleRect.bottom - messageAreaRect.top) + messageArea.scrollTop + 10; 
            }

            let leftPosition;
            const isUser = bubble.dataset.isUser === 'true';
            
            // Center content area for chat is max-w-lg. We must position relative to the bubble's position within the messageArea.
            const bubbleLeftRelativeToContainer = bubbleRect.left - messageAreaRect.left;

            if (isUser) {
                // For user's message (right side), align bar to the right edge of the bubble
                leftPosition = bubbleLeftRelativeToContainer + bubbleRect.width - emojiBarWidth;
            } else {
                // For other person's message (left side), align bar to the left edge of the bubble
                leftPosition = bubbleLeftRelativeToContainer;
            }
            
            // Apply the position to the emoji bar
            emojiBar.style.top = `${topPosition}px`;
            emojiBar.style.left = `${leftPosition}px`;
            emojiBar.classList.add('emoji-show');
            
            // Make the emoji bar sticky relative to the message area
            const chatSectionRect = individualChatSection.getBoundingClientRect();
            
            // Final position relative to the chat section (which is the absolute parent)
            const emojiBarTop = bubbleRect.top - chatSectionRect.top - 50;
            
            // Apply the position and show the bar
            emojiBar.style.top = `${emojiBarTop}px`;
            emojiBar.style.left = `${bubbleRect.left + (isUser ? bubbleRect.width - emojiBarWidth : 0)}px`;
            emojiBar.classList.add('emoji-show');
        }
        
        messageArea.addEventListener('click', (event) => {
            // Find the closest message bubble element
            const bubble = event.target.closest('.message-bubble');
            
            // Hide the emoji bar if we click outside a bubble
            if (!bubble) {
                emojiBar.classList.remove('emoji-show');
                activeMessage = null;
                return;
            }

            // A bubble was clicked!
            activeMessage = bubble;
            positionEmojiBar(bubble);
        });

        // --- Emoji Bar Click (Applying Reaction) ---
        emojiBar.addEventListener('click', (event) => {
            const reactionBtn = event.target.closest('button[data-emoji]');
            
            if (reactionBtn && activeMessage) {
                const selectedEmoji = reactionBtn.dataset.emoji;
                
                // 1. Check if a reaction already exists and remove it
                const existingReaction = activeMessage.querySelector('.reaction-emoji');
                if (existingReaction) {
                    existingReaction.remove();
                }

                // 2. Add the new reaction emoji
                const reactionSpan = document.createElement('span');
                reactionSpan.className = 'reaction-emoji';
                reactionSpan.textContent = selectedEmoji;
                
                // Add the reaction to the message bubble (which has position: relative)
                activeMessage.appendChild(reactionSpan);
                
                // 3. UPDATE THE STATE with the reaction
                const chatName = currentChatName();
                const bubbles = messageArea.querySelectorAll('.message-bubble');
                // Find the index of the message that was reacted to
                const messageIndex = Array.from(bubbles).indexOf(activeMessage);

                if (chatHistories[chatName] && chatHistories[chatName][messageIndex]) {
                    chatHistories[chatName][messageIndex].reaction = selectedEmoji;
                }

                // 4. Hide the reaction bar
                emojiBar.classList.remove('emoji-show');
                activeMessage = null;
            }
        });


        // --- Add click event listeners for main navigation ---
        homeBtn.addEventListener('click', () => handleNavClick(homeBtn, 'meetings-section'));
        chatBtn.addEventListener('click', () => handleNavClick(chatBtn, 'chat-list-section'));
        userBtn.addEventListener('click', () => handleNavClick(userBtn, 'user-section'));

        // Chat list items
        chatItems.forEach(item => {
            item.addEventListener('click', () => {
                const chatName = item.dataset.chatName;
                const avatarSrc = item.querySelector('img').src;
                openChat(chatName, avatarSrc);
            });
        });

        // Chat back button
        backToChatListBtn.addEventListener('click', () => {
            individualChatSection.classList.add('hidden');
            document.getElementById('main-content-wrapper').classList.remove('hidden');
            
            // Show the correct main section based on which nav button is currently active (defaulting to chat-list if unsure)
            const activeNavId = navBtns.find(btn => btn.classList.contains('bg-white')).id;
            
            // Hide all other main sections first
            meetingsSection.classList.add('hidden');
            chatListSection.classList.add('hidden');
            userSection.classList.add('hidden');
            
            if (activeNavId === 'chat-btn') {
                chatListSection.classList.remove('hidden');
            } else if (activeNavId === 'user-btn') {
                userSection.classList.remove('hidden');
            } else { // default to meetings
                meetingsSection.classList.remove('hidden');
                topNav.classList.remove('hidden');
            }
            
            bottomNavFooter.classList.remove('hidden');
            
            // Hide the emoji bar on exit and the centered warning
            emojiBar.classList.remove('emoji-show');
            messagingNotAllowed.classList.add('hidden');
            activeMessage = null;
            messageInput.value = ''; // Clear input on exit
            messageInput.style.height = '48px'; // Reset input height on exit
        });
        
        // --- Event Listeners for Send Functionality ---
        if (sendMicBtn) {
            sendMicBtn.addEventListener('click', () => {
                // Only send a message if the input is NOT empty (i.e., the Send icon is visible)
                if (messageInput.value.trim().length > 0) {
                    sendMessage();
                } else {
                    // This is where you would handle voice recording if the Mic icon is visible
                    console.log('Voice recording initiated (Not implemented)');
                }
            });
        }
        
        if (messageInput) {
            messageInput.addEventListener('keypress', (event) => {
                // Check if the Enter key was pressed without the Shift key
                if (event.key === 'Enter' && !event.shiftKey) {
                    event.preventDefault(); // Prevent default new line behavior
                    sendMessage();
                }
            });
        }


        // Add a click listener to the entire document to hide the emoji bar if clicking elsewhere
        document.addEventListener('click', (event) => {
            const isClickingEmojiBar = event.target.closest('#emoji-bar');
            const isClickingMessageArea = event.target.closest('#message-area');
            
            if (!isClickingEmojiBar && isClickingMessageArea && activeMessage) {
                // If we click the message area but not another message (which would trigger the repositioning), 
                // and not the emoji bar, hide it. We only need to handle clicking on the whitespace.
                if (!event.target.closest('.message-bubble')) {
                     emojiBar.classList.remove('emoji-show');
                     activeMessage = null;
                }
            } else if (!isClickingEmojiBar && !isClickingMessageArea) {
                 emojiBar.classList.remove('emoji-show');
                 activeMessage = null;
            }
        });
    </script>

</body>
                                                                                                                                                                                                                                                                                                                                      </html>
